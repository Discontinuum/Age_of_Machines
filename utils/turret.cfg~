#define ABILITY_BUILD_TURRET
    # Canned definition of the Salvage ability to be included in an
    # [abilities] clause.
    [dummy]
        id=build_turret
        name= _ "build turret"
        female_name= _ "female^build turret"
        description=_ "This unit can build an Orcish Turret for the price of 15 gold. works only if the unit has all of his moves left. (Note, this menu will only appear when any side turn starts with this unit present)"
    [/dummy]
[/abilities]
    [event]
        name=side turn
        id=turret
        first_time_only=no

    [set_menu_item]
        id=turret
        description="build a turret for 14 gold"
        image=units/orcs/turret.png~SCALE(24,24)
        [show_if]
        [/show_if]

        [filter_location]
            [filter_adjacent_location]
                [filter]
                    ability=build_turret
                    side=$side_number
#                    [filter_wml]
#                        moves=$this_unit.max_moves
#                    [/filter_wml]
                [/filter]
            [/filter_adjacent_location]
            [not]
                [filter]
                [/filter]
                [or]
                    terrain=_off^_usr,Q*,W*,*^X*,X*
                [/or]
            [/not]
        [/filter_location]
        [command]
                [store_gold]
                    side=$side_number
                    variable=gold
                [/store_gold]
            [message]
                speaker=narrator
                message= _ "Currently there is $gold| gold, do you want to build a turret here?"
                [option]
                    message={MENU_IMG_TXT "misc/x.png" _"No."}
                    [command]
                    [/command]
                [/option]
                [option]
                    message={MENU_IMG_TXT "units/orcs/turret.png" _"Yes"}	#to be modified with the values for the new unit
                    [show_if]
                        [variable]
                            name=gold
                            greater_than_equal_to=14	#insert summoning cost (in mana points)
                        [/variable]
                    [/show_if]
                    [command]
                [gold]
                 side=$side_number
                 amount=-14
                [/gold]
                [sound]
			name=gold.ogg
		[/sound]
                        [unit]
                            type=Orcish Turret
                            side=$side_number
                            x,y=$x1,$y1
                            moves=0
                            attacks_left=1
                            #			animate=yes
                        [/unit]
                    [/command]
                [/option]
            [/message]
        [/command]
    [/set_menu_item]
    [/event]
[+abilities]
#enddef
